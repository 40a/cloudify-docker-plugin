#    Licensed under the Apache License, Version 2.0 (the "License"); you may
#    not use this file except in compliance with the License. You may obtain
#    a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#    License for the specific language governing permissions and limitations
#    under the License.


imports:
    - http://www.getcloudify.org/spec/cloudify/3.0/types.yaml

plugins:
    docker_plugin:
        derived_from: cloudify.plugins.agent_plugin
        properties:
            #TODO fix URL
            url: http://insert/url/to/plugin/here

types:
    cloudify.types.docker.web_server:
        derived_from: cloudify.types.web_server
        interfaces:
            cloudify.interfaces.lifecycle:
                - create: docker_plugin.tasks.create
                - configure: docker_plugin.tasks.configure
                - start: docker_plugin.tasks.run
                - stop: docker_plugin.tasks.stop
                - delete: docker_plugin.tasks.delete
        properties:
            - daemon_client
            - image_build
            - image_import
            - container_create
            - container_start
            - container_stop
            - container_remove

    cloudify.types.docker.app_server:
        derived_from: cloudify.types.app_server
        interfaces:
            cloudify.interfaces.lifecycle:
                - create: docker_plugin.tasks.create
                - configure: docker_plugin.tasks.configure
                - start: docker_plugin.tasks.run
                - stop: docker_plugin.tasks.stop
                - delete: docker_plugin.tasks.delete
        properties:
            - daemon_client
            - image_build
            - image_import
            - container_create
            - container_start
            - container_stop
            - container_remove

    cloudify.types.docker.db_server:
        derived_from: cloudify.types.db_server
        interfaces:
            cloudify.interfaces.lifecycle:
                - create: docker_plugin.tasks.create
                - configure: docker_plugin.tasks.configure
                - start: docker_plugin.tasks.run
                - stop: docker_plugin.tasks.stop
                - delete: docker_plugin.tasks.delete
        properties:
            - daemon_client
            - image_build
            - image_import
            - container_create
            - container_start
            - container_stop
            - container_remove

    cloudify.types.docker.message_bus_server:
        derived_from: cloudify.types.message_bus_server
        interfaces:
            cloudify.interfaces.lifecycle:
                - create: docker_plugin.tasks.create
                - configure: docker_plugin.tasks.configure
                - start: docker_plugin.tasks.run
                - stop: docker_plugin.tasks.stop
                - delete: docker_plugin.tasks.delete
        properties:
            - daemon_client
            - image_build
            - image_import
            - container_create
            - container_start
            - container_stop
            - container_remove

    cloudify.types.docker.app_module:
        derived_from: cloudify.types.app_module
        interfaces:
            cloudify.interfaces.lifecycle:
                - create: docker_plugin.tasks.create
                - configure: docker_plugin.tasks.configure
                - start: docker_plugin.tasks.run
                - stop: docker_plugin.tasks.stop
                - delete: docker_plugin.tasks.delete
        properties:
            - daemon_client
            - image_build
            - image_import
            - container_create
            - container_start
            - container_stop
            - container_remove
